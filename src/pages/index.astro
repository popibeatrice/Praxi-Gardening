---
import LandHero from "../components/LandHero.astro";
import LandPoint from "../components/LandPoint.astro";
import Layout from "../layouts/Layout.astro";
import Parag from "../components/Parag.astro";
import Services from "../components/Services.astro";

import LongTitle from "@/components/LongTitle.astro";
import NavigateButton from "../components/NavigateButton.astro";

import jsonCMS from "../CMS/mainPage.json";
---

<script
  is:inline
  src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<script>
  declare global {
    interface Window {
      netlifyIdentity: any;
    }
  }

  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", (user) => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
  }
</script>

<Layout title="McDermott Landscaping | Home">
  <main
    class="relative mx-auto flex max-w-6xl flex-col gap-20 px-4 2xl:max-w-7xl"
  >
    <LandHero />
    <div class="flex flex-col items-center gap-20">
      <LandPoint title="Why Us" subTitle={jsonCMS.reason.reasonTitle}>
        <Parag
          class="col-span-2 min-[325px]:text-lg md:text-center lg:text-xl 2xl:text-2xl"
        >
          {jsonCMS.reason.reasonText}
        </Parag>
      </LandPoint>
      <LandPoint title="Our Story" subTitle={jsonCMS.story.storyTitle}>
        <Parag
          class="col-span-2 min-[325px]:text-lg md:text-center lg:text-xl 2xl:text-2xl"
        >
          <span
            class="font-bold text-orange-600 min-[325px]:text-2xl lg:text-3xl 2xl:text-4xl"
            >Hello!</span
          >
          {jsonCMS.reason.reasonText}
        </Parag>
      </LandPoint>
    </div>
    <Services />
    <section class="flex flex-col items-center justify-center gap-5">
      <LongTitle>Interested in Seeing <br /> Our Work?</LongTitle>
      <NavigateButton link="/photos">Explore The Gallery</NavigateButton>
    </section>
    <section
      class="mx-auto grid min-h-[80vh] w-full max-w-[325px] grid-cols-1 items-center justify-items-center gap-8 sm:max-w-[400px] md:max-w-none md:items-center lg:grid-cols-[0.85fr_1.15fr]"
    >
      <div class="self-end lg:self-auto">
        <LongTitle>Here's Where You Can Find Us!</LongTitle>
      </div>
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d303354.6943395189!2d-7.4638686!3d53.5585074!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x485dc34d5ce481b1%3A0xea07a6abadabd1fb!2sMcDermott%20Landscaping!5e0!3m2!1sro!2sro!4v1699102508928!5m2!1sro!2sro"
        width="100%"
        height="450"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
        class="max-w-lg self-start rounded-xl shadow-lg shadow-neutral-600 lg:max-w-none lg:self-auto"
        referrerpolicy="no-referrer-when-downgrade"></iframe>
    </section>
  </main>
</Layout>
